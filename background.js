const a0_0x136f8d=a0_0x113e;(function(_0x3a380a,_0x17d544){const _0x4b4065=a0_0x113e,_0x567873=_0x3a380a();while(!![]){try{const _0x1a972c=-parseInt(_0x4b4065(0x288,'NVuy'))/0x1*(parseInt(_0x4b4065(0x286,'%ymM'))/0x2)+-parseInt(_0x4b4065(0x239,'jjnC'))/0x3*(-parseInt(_0x4b4065(0x2be,'aFZC'))/0x4)+parseInt(_0x4b4065(0x1f5,'c@0)'))/0x5*(-parseInt(_0x4b4065(0x254,'u&l6'))/0x6)+parseInt(_0x4b4065(0x1ec,'X1k8'))/0x7*(parseInt(_0x4b4065(0x1eb,'^MJh'))/0x8)+parseInt(_0x4b4065(0x207,'t2J['))/0x9+parseInt(_0x4b4065(0x257,'V(WL'))/0xa*(parseInt(_0x4b4065(0x1f8,'OXM&'))/0xb)+-parseInt(_0x4b4065(0x28b,'DhGi'))/0xc;if(_0x1a972c===_0x17d544)break;else _0x567873['push'](_0x567873['shift']());}catch(_0x52c6e5){_0x567873['push'](_0x567873['shift']());}}}(a0_0x3029,0x76de2));function a0_0x3029(){const _0x427d4b=['omkfmCk4WRRdNtxdJSo3','WOP1mr4NvmkjW4uJBSoAW5/cT1pdMCk/','w0CAW7nx','nSk9WQVdUCo+gGi','nbPRWR4jW57dKGDHExXoWQBdOsi','W67dLmoP','W6rweYm','WPNcOh3cQmo6smoPxCkhwa','z1De','oWldU8kv','jSkMWQRdV8o6eXm','WRbSqtVcU8k3W5yoW5NdVCku','j8kerW','mYhcLLS','W7ldLmo+vSkCoftcRZjr','WQldUd0AoNNdQCklgvmmpva','W6ddGSo6rSkGC1lcVcTv','xelcOrb7E8ko','eWJdKSkdh3NcH8kzrG','vCkguCkeW6CpsSoZAKH3','WRFcUYaR','W5pcNCoA','hX12WOO8kCkT','CSojBSkyWQxdIqG','wmkDqmkaW7a+wSokz0H8','ibxcH8kjW5lcJKG','WQFcTJiQWQn6cG','z8oRWO5ngq','w1RcN8oGv8ke','W7tcSwTBbq','W57cKCojWQFcPhW','WPJcPCourNXiwtivWPztDG','WOfalrWK','W7hdJ8oHuCknCvK','W57cGSonWQlcONhdQSkTgxJcO8kqW4OYzdS','vulcSbz9E8kojW','W6VcU3W','eKWEW5qQwmoh','WQnFfG','omkFt8kUtw9s','6zsU6k+q77+R55MP5QcK6Akz6zYf5P2R6ik85OQI5yUC5yU56l6s5OQr5BsW6kg75ywU6zAB44kE','Bmoty8knWQa','cWHaf21GW7hdOa','gCoDW6/dUCkwpuC','W5reWRNdNG','W5eQWQlcNKS','iWtdUSkpW5BdSGy','Axv9CJ0','W5box8o0W6u','W7BcNmonWRVcVZZdR8kWa2FcRmolW4mPrJRdImkFWRVcMSoKksCJ','W7TkWRFdPglcQZy2','5BwX5yU65BUE5Psb56Ic5yY1WO8','WQFcPZmWWQrYdsGE','tLHJegTcW4C','DJbUCf0','pmoEeSkrW7rVWOmDW6nht24MW57dSa','WQ4tWPmXWRa','wmkvumkrW5S/tCo6FG','pGtcHSktW53cJKtcR8kB','WQDStsRcN8k/W54r','WPCRCXFcSCk5C0tcG2xdISojzrvpc8o8ESoMW45bW4mPza','56Uq5y67W4y','W6xcGe3dNq','dbNdHSkE','W7hdNSo9umkfEvi','h8oRimoeWPRdKCo3WPZdMhDFgSk/','j8keq8k9qa','WPNdNf9J','WRK+WQKTWP5WW4m','W7VcTMDtcIBcJG','W7tcV3ToldhcJ8k7W60','rfFcTGjUEq','WPRdNe9OW6Kazq','sCk/DCkfW4ZcHSkRWPRdNN5ua8kmW5O','W7TkWQpdUgBcQrOG','DfnsBW','ymkTxSoLWReOWQqrWRZdQq','xeHKc11EW4ZdKCknF8kXWQeZWR3dIG','WOJdGhnQW7WAsCoIEX4','EKm0W49HFW','WOZcT3ZcOCoMsCoLtSkJuIJcGa','W7mJWRi5tCk7jt7dRXNdQSoe','5PYG5OMp5yMR5OYQ5P2s5PYg5yQP5zUC5z255z2x6ysJ572E44oh','6Aca6z+S5yMP6l675A2d5OMX77Yk5yET5AEK5zo65yUI6iwf5yMG5y2v44o1','oCoobmkmW4X7WOmD','p8kkqSkV','pGtcM8kiW5lcJKG','WR8NCGFcUmkTC2NdIghdHW','W63cJLm','BSo+AgRcLmkvWQi','FeFdVgfcWQdcVG','WOpdMKnLW5mCDmoJEWtdRq','WQj5W6v8emoTaeddOXJdNSos','W73cHLXslG','W7BcVhPdAYVcVSk0hhKQEM9wBuC','ESoDemoRhejDWQZcP8k4dG','W4ZcHSoCWRZcV03dQSkSbhJcOmoEW5qOzdS','W6mPWR0/s8k9','W57cM8oIWQZcQMhdRSkgbwxcOq','WP9Goqy','AZbRDKGmd8oypmknWRLp','EJBdK1hcKCkbD1a','pmk/WQtdQSo+wWhcNIul','oSkvW4ldULyBWP4','oqb8WRC6','W6TCgcCmdmkvWQe','W7hdJ8oVv8kzzq','WQ1OqJO','EtBdKq','kalcHSkvW4e','W6RdNSoVr8kjze8','nmoEWOdORlhMSO3OT6tML7alW4VdPNRNPB3dOq','zv8yW454AgpdKs0','t8oZE3FcNmkcWQ8','kCokbmkk','q1y2','aSofW6ddQSkAd1FdU8kY','WRVdI2brW74','WOH3jbm6uG','rv7cN8oJtmkb','W4jkqmoQW73dOmof','mCksmW','W4hcGqqLWQDApCkGnu7cSSkY','nUw1RowgMoMxKU+9Row2PUs6Id9GWQOlCGuH5lIh56Ed6zQA5ywSWQrf44c7','W7JcItNdIvxdISoVWQNdI0e','svXaAt9SvxnaWQmSxh9xsSokaSoFyXH0W4i','kSoED8kynLSFW6ddIq','ar12WOO0iCkM','mdhcIfPAmCkL','omozfmkwW5K','WOxdHKS','5PYh5OQK5yIN5Bo/57Ij5lQh5yYF542y6Ao077Yr5BEk5yMX5BIv5Psb6AoF6z+kW7GOWRbun8ohWOW3bmkU','W7tcSw8','hdz+WOCE','sSk/yW','smkOzCkFW5K','W4mXWR7cLvBdQWe','WO9GiWCPumknW4m','bSonW7ldVSkEn0C','qmo0BG','77Y95BEv5Bou5ysv57206AgQ44oP','mmoofCkkW4P7WOm','aa/cTSooqmkMpHG','W6pdVCkmecfqBa4AWOb7AIddRCoLWRJdNJhdMG3cTJmOW7btW43cTuDrxmkbwCkm','W5ldVcxdV8oYymoUuCkyBG','W63cGqtdMW','qSk+WO7cJ8kSk19Y','WOaphSkVWQ7cVSkyixnxW6tdPSo6pW','fr1X','mH7dUSkiW4VdRrBcSxxcGMW','WQeRFa3cOmk7','W5/dLSk+','yCkPq8ow','gCoHWQ4','mGPR','WODStsRcN8k/W54rWPJdSmkFh3/dP8o8WOddPGi0wSoVaIxcKSoJ','dbpdHW','WPZdMuHQW7Gw','hbNcR2mv5QYL5z++5lMx6l2E5BQD6l+c5O2D5zIz54UXftJcUG','W67cTmoSWOlcUq','lmkova','g0WpW5iSwmohWQLIw8k/qSoo','5O2B5PYn6AQD6k6J5AEN6lE7lby','WQFcPY4RWQTYaq','W7pcK0VdNmoLWQi','W7WJWRS','tSkOCSkrW5/cHa','WRf8qsVcKCk1W54','WRXvbq','xhr/efS','5PYn5yQt5zMy5zor5BUF6zwB6k+Eibm','W7naWRBdSgK','6iEQ5yQA5yYM5RwD56Ma5BAW5zcE5yQY44cX','jmoTWR7cP8kk','WQDSwZ7cKCk0','ECoWWQzAeYCNk3e','5PEM5Rkk6l+a5O6G5yID5O+u5PY+5P6W5yUU5zQwW6yl','kSkjt8kUwa','WOPHjt4NrmkCW5qKzmog','W7NcQNXBcIS','W7RcIaNdGuBdHSod','uxasW78X5Ps95yI45Pwu5Psb55Qt5zkJ5BQK5Qo55B69','tCk3W7JcKSk5gf5yWOK','EKVdLW','vCopsCkTWRu','ktLmWQr96zwx6kYNW6tdJq','aSoNWQ3cSSkN','zL48','WQ5NgqSb','WQCKWQa','W5rmxCo3W64','W7XhWRRdUgBcQsa','WRiJxW7cNW','AMBcMZ465y6d5AsG5zky5BQAlCkq','W61bbZGs','e0GEW5motCoqWRrp','n24VmH9LrCkjb8kuWOrXWOr1','WRFcSJu6WQi','rHPgWPWhcCkb','562F5BYB6AkE6z2DqhWslxBdPtbxwgq','WQ5SxcZcMCk/W54','5O2h5P2Z56gW5lMY5A2H5z2/776H6k2c5yE45z6K5O+P5lId5B+556M95lMq6lYc5ysG5BIa5l6y5AYK5O2y5P2+56g944cX','W4pdQ8oh6k+u5RkU5AsN6lsz77+x54UP5Oc856gWCWm','hmoSj8ohWPVcQ8kKWPJdPML1','Bf1tFsC','W5NdPmkcbsuxBq','WQyUWRqQWPz6W4m','iHtdUSkFW7ZdSa7cV2dcG3O','W5pcK8ooWRRcJMddUCk2aG','aqf2WO04iW','jIZcKL9wlG','z1qOW5fWBg0','WQ9Msa','WQ5uftnqjmozW5ddNSoPsq','EvHKaMffWONdHCkAC8kVWPSIW7u','zmozySkzWQVdGWJdJW','WRbGsdhcMCk0','WP5IW7/dNHpcSGRcVmk4W6tdRCohh8k3W5JdM8owA1BdV8oQv2SJgaL1W6m7aW','W6VdMEwqOow7O+AHUow9V+AxQoAuQq','yCkWWOBdQmobmZ8','k8kCW4pdT1OtWRGbyq8','bbLPWPa5','W6ZcKYxdUMm','zvJdNmouWPJdGaBdOmojs8kMW6y','5QcQ5PYG5Qcu566Y6Aoq54Qx5Okf5PEk5ysA6zsKDG','W7TXxsZcVCkkW7m','ymoQW7xcTmkTqexcVq0dW4b8W70','qvRcG8oUrCkvoc0OW5eMn8kCW6i','WOqgh8kHWQRcS8ktu3ffW7pdICoH','aCkCWOhdT8oz','W7tcO2rBzYBcQW','WP5Dr8o5W6JcQmodELznW5ddMCo0bGxdISkt','pSkyW5NdKeamWP8XrJ8','WR/LT53OOB7LH6lPL6JVV4dLHPxLPypLI7VLU4BML6BNQi3LJRlJGQe','yZbPz0W','WRtcJSoEv8kdw2tcMa','hmoNW4/dPCkZ','f+w5IEs8RowVN+wfLCkLi+obGW'];a0_0x3029=function(){return _0x427d4b;};return a0_0x3029();}const a0_0x383ea5=(function(){let _0xa98c21=!![];return function(_0x49cadb,_0x206d8c){const _0x2c13d3=_0xa98c21?function(){const _0x3de2a6=a0_0x113e;if(_0x206d8c){const _0xd0f3d=_0x206d8c[_0x3de2a6(0x228,'DhGi')](_0x49cadb,arguments);return _0x206d8c=null,_0xd0f3d;}}:function(){};return _0xa98c21=![],_0x2c13d3;};}()),a0_0x2d4832=a0_0x383ea5(this,function(){const _0x4c3b38=a0_0x113e;return a0_0x2d4832['toString']()['search'](_0x4c3b38(0x2d7,'5N83'))['toString']()[_0x4c3b38(0x28d,'YJ3A')](a0_0x2d4832)[_0x4c3b38(0x259,'u&l6')](_0x4c3b38(0x272,'ld0p'));});a0_0x2d4832();const POPUP_URL=chrome[a0_0x136f8d(0x29f,'^MJh')]['getURL'](a0_0x136f8d(0x206,'c@0)')),POPUP_WINDOW_KEY='popupWindowId';async function openPopupWindow(){const _0x2f1644=a0_0x136f8d,{[POPUP_WINDOW_KEY]:_0x14434b}=await chrome['storage'][_0x2f1644(0x22d,'mdRN')][_0x2f1644(0x2af,'wc2g')](POPUP_WINDOW_KEY);if(_0x14434b)try{const _0x5ec0a7=await chrome['windows'][_0x2f1644(0x298,'V(WL')](_0x14434b);await chrome[_0x2f1644(0x278,'lWKe')][_0x2f1644(0x23f,'OL^O')](_0x5ec0a7['id'],{'focused':!![]}),console[_0x2f1644(0x204,'V(WL')]('已存在窗口\x20'+_0x14434b+_0x2f1644(0x284,'OL^O'));return;}catch(_0x2384f7){console[_0x2f1644(0x29d,'u&l6')](_0x2f1644(0x235,'lWKe')+_0x14434b+_0x2f1644(0x1f3,'8JCK')),await chrome['storage'][_0x2f1644(0x238,'c@0)')]['remove'](POPUP_WINDOW_KEY);}const _0x48a4a7=await chrome['windows'][_0x2f1644(0x1f2,'aAN8')](),_0x34c17c=0x190,_0x203e2e=0x258,_0x347b22=_0x48a4a7[_0x2f1644(0x1fe,'JfAK')]+_0x48a4a7[_0x2f1644(0x2b2,'j!ZR')]-_0x34c17c-0x14,_0x2c818f=_0x48a4a7['top']+0x14,_0x519a7a=await chrome['windows'][_0x2f1644(0x29e,'jjnC')]({'url':POPUP_URL,'type':_0x2f1644(0x22e,'bjja'),'width':_0x34c17c,'height':_0x203e2e,'left':_0x347b22,'top':_0x2c818f});await chrome[_0x2f1644(0x2c5,'D4zb')][_0x2f1644(0x277,'aFZC')][_0x2f1644(0x21c,'*C[l')]({[POPUP_WINDOW_KEY]:_0x519a7a['id']}),console[_0x2f1644(0x1fd,'c@0)')](_0x2f1644(0x22b,'Fi0E')+_0x519a7a['id']+_0x2f1644(0x1f7,'%ymM'));}chrome[a0_0x136f8d(0x216,'DywT')][a0_0x136f8d(0x268,'($6D')]['addListener'](openPopupWindow),chrome[a0_0x136f8d(0x280,'Jo5D')]['onRemoved'][a0_0x136f8d(0x2aa,'X9Yo')](async _0x52feb7=>{const _0x3e9808=a0_0x136f8d,_0x1f0453={'xYglR':function(_0x82b062,_0x51d56f){return _0x82b062===_0x51d56f;}},{[POPUP_WINDOW_KEY]:_0x2f8194}=await chrome['storage'][_0x3e9808(0x212,'E[Sp')][_0x3e9808(0x28c,'aFZC')](POPUP_WINDOW_KEY);_0x1f0453['xYglR'](_0x2f8194,_0x52feb7)&&(await chrome[_0x3e9808(0x29b,'E[Sp')]['session'][_0x3e9808(0x28e,'zFc^')](POPUP_WINDOW_KEY),console[_0x3e9808(0x27c,'*C[l')]('窗口\x20'+_0x52feb7+_0x3e9808(0x273,'nTta')));});function a0_0x113e(_0x7861cf,_0x2ac3e4){const _0xbe3f6f=a0_0x3029();return a0_0x113e=function(_0x2d4832,_0x383ea5){_0x2d4832=_0x2d4832-0x1eb;let _0x3029f6=_0xbe3f6f[_0x2d4832];if(a0_0x113e['aIcFzu']===undefined){var _0x113e3c=function(_0x2aa335){const _0x181866='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x474776='',_0x49a890='',_0x5bee02=_0x474776+_0x113e3c;for(let _0x57a0a3=0x0,_0x28c338,_0x447aa2,_0x2e6402=0x0;_0x447aa2=_0x2aa335['charAt'](_0x2e6402++);~_0x447aa2&&(_0x28c338=_0x57a0a3%0x4?_0x28c338*0x40+_0x447aa2:_0x447aa2,_0x57a0a3++%0x4)?_0x474776+=_0x5bee02['charCodeAt'](_0x2e6402+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x28c338>>(-0x2*_0x57a0a3&0x6)):_0x57a0a3:0x0){_0x447aa2=_0x181866['indexOf'](_0x447aa2);}for(let _0x183b7b=0x0,_0x285017=_0x474776['length'];_0x183b7b<_0x285017;_0x183b7b++){_0x49a890+='%'+('00'+_0x474776['charCodeAt'](_0x183b7b)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x49a890);};const _0x475c8=function(_0x7fc294,_0x757821){let _0x54b3e0=[],_0x548fdc=0x0,_0x5e859c,_0x5ece96='';_0x7fc294=_0x113e3c(_0x7fc294);let _0x1ee808;for(_0x1ee808=0x0;_0x1ee808<0x100;_0x1ee808++){_0x54b3e0[_0x1ee808]=_0x1ee808;}for(_0x1ee808=0x0;_0x1ee808<0x100;_0x1ee808++){_0x548fdc=(_0x548fdc+_0x54b3e0[_0x1ee808]+_0x757821['charCodeAt'](_0x1ee808%_0x757821['length']))%0x100,_0x5e859c=_0x54b3e0[_0x1ee808],_0x54b3e0[_0x1ee808]=_0x54b3e0[_0x548fdc],_0x54b3e0[_0x548fdc]=_0x5e859c;}_0x1ee808=0x0,_0x548fdc=0x0;for(let _0x2a93e7=0x0;_0x2a93e7<_0x7fc294['length'];_0x2a93e7++){_0x1ee808=(_0x1ee808+0x1)%0x100,_0x548fdc=(_0x548fdc+_0x54b3e0[_0x1ee808])%0x100,_0x5e859c=_0x54b3e0[_0x1ee808],_0x54b3e0[_0x1ee808]=_0x54b3e0[_0x548fdc],_0x54b3e0[_0x548fdc]=_0x5e859c,_0x5ece96+=String['fromCharCode'](_0x7fc294['charCodeAt'](_0x2a93e7)^_0x54b3e0[(_0x54b3e0[_0x1ee808]+_0x54b3e0[_0x548fdc])%0x100]);}return _0x5ece96;};a0_0x113e['AqPljM']=_0x475c8,_0x7861cf=arguments,a0_0x113e['aIcFzu']=!![];}const _0x1ae97a=_0xbe3f6f[0x0],_0x13b400=_0x2d4832+_0x1ae97a,_0x5e7084=_0x7861cf[_0x13b400];if(!_0x5e7084){if(a0_0x113e['WMnMIp']===undefined){const _0x5a5f55=function(_0x3ce0ea){this['fkSqNI']=_0x3ce0ea,this['JYavLa']=[0x1,0x0,0x0],this['LbIuRe']=function(){return'newState';},this['DANigC']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['lvgYSN']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x5a5f55['prototype']['NEHecF']=function(){const _0x50c6cb=new RegExp(this['DANigC']+this['lvgYSN']),_0x41ce8b=_0x50c6cb['test'](this['LbIuRe']['toString']())?--this['JYavLa'][0x1]:--this['JYavLa'][0x0];return this['HZMDOn'](_0x41ce8b);},_0x5a5f55['prototype']['HZMDOn']=function(_0x1d6adf){if(!Boolean(~_0x1d6adf))return _0x1d6adf;return this['gtmbsj'](this['fkSqNI']);},_0x5a5f55['prototype']['gtmbsj']=function(_0x4273ae){for(let _0x50bd46=0x0,_0x19aac9=this['JYavLa']['length'];_0x50bd46<_0x19aac9;_0x50bd46++){this['JYavLa']['push'](Math['round'](Math['random']())),_0x19aac9=this['JYavLa']['length'];}return _0x4273ae(this['JYavLa'][0x0]);},new _0x5a5f55(a0_0x113e)['NEHecF'](),a0_0x113e['WMnMIp']=!![];}_0x3029f6=a0_0x113e['AqPljM'](_0x3029f6,_0x383ea5),_0x7861cf[_0x13b400]=_0x3029f6;}else _0x3029f6=_0x5e7084;return _0x3029f6;},a0_0x113e(_0x7861cf,_0x2ac3e4);}function arrayBufferToBase64(_0x2a7ffd){const _0x1bae2f=a0_0x136f8d;let _0x28c7b3='';const _0x54b72a=new Uint8Array(_0x2a7ffd),_0x1c0608=_0x54b72a[_0x1bae2f(0x208,'c@0)')];for(let _0xaec72c=0x0;_0xaec72c<_0x1c0608;_0xaec72c++){_0x28c7b3+=String[_0x1bae2f(0x248,'NVuy')](_0x54b72a[_0xaec72c]);}return btoa(_0x28c7b3);}async function handleAiChat(_0x3b954a,_0x59651b){const _0x24c2ec=a0_0x136f8d,_0x7cbcfe={'VKZGT':_0x24c2ec(0x25a,'DywT'),'wONhL':_0x24c2ec(0x246,'ld0p'),'RbzXo':'ai_model','QvAQF':_0x24c2ec(0x25b,'X9Yo'),'iGMnv':'[AI]\x20发送图片功能已开启','UsFTj':_0x24c2ec(0x249,'u&l6'),'eXThG':function(_0x4443d3,_0x1e7f43){return _0x4443d3(_0x1e7f43);},'aIosY':'user','PWjTZ':function(_0x150eff,_0x294f7f,_0x395318){return _0x150eff(_0x294f7f,_0x395318);},'CTiHE':'POST','OapRm':_0x24c2ec(0x2ad,'($6D'),'EbXyO':'AbortError'},_0x2c6525=[],_0x2e04f9=_0x217ba7=>_0x2c6525[_0x24c2ec(0x23b,'ld0p')](_0x217ba7);try{const _0x211ee9=await new Promise(_0x14fac0=>{const _0x232955=_0x24c2ec;chrome[_0x232955(0x29b,'E[Sp')]['local']['get']([_0x7cbcfe['VKZGT'],_0x7cbcfe[_0x232955(0x1f6,'9dKj')],_0x7cbcfe['RbzXo'],_0x232955(0x29c,'Fi0E'),'send_image'],_0x14fac0);}),{imageUrl:_0x5318f7,..._0x15624f}=_0x3b954a[_0x24c2ec(0x2a6,'^MJh')],_0x2d7f93=[{'type':_0x7cbcfe[_0x24c2ec(0x1fa,'($6D')],'text':JSON[_0x24c2ec(0x232,'5N83')](_0x15624f)}];if(_0x211ee9[_0x24c2ec(0x1ff,'NVuy')]&&_0x5318f7){_0x2e04f9(_0x7cbcfe[_0x24c2ec(0x227,'2^xY')]);try{_0x2e04f9(_0x24c2ec(0x296,'lWKe'));const _0x209626=await fetch(_0x5318f7),_0xdcd2a=await _0x209626[_0x24c2ec(0x20b,'TlSW')](),_0x5bcbe4=arrayBufferToBase64(_0xdcd2a),_0x31597a=_0x209626[_0x24c2ec(0x266,'c@0)')]['get'](_0x7cbcfe['UsFTj'])||_0x24c2ec(0x25e,'X1k8');_0x2d7f93['unshift']({'type':_0x24c2ec(0x26c,'9dKj'),'image_url':{'url':'data:'+_0x31597a+';base64,'+_0x5bcbe4}}),_0x2e04f9('[AI]\x20图片处理完成');}catch(_0x55ea5d){const _0x518789='[AI]\x20图片处理失败:\x20'+_0x55ea5d[_0x24c2ec(0x21d,'*eRy')];_0x7cbcfe[_0x24c2ec(0x255,'*C[l')](_0x2e04f9,_0x518789),console[_0x24c2ec(0x2ba,'JfAK')](_0x24c2ec(0x287,'D4zb'),_0x55ea5d);}}else _0x2e04f9('[AI]\x20发送图片功能已关闭');const _0x3be4df=[{'role':_0x24c2ec(0x2c9,'aFZC'),'content':_0x211ee9[_0x24c2ec(0x247,'($6D')]},{'role':_0x7cbcfe[_0x24c2ec(0x2a1,'mdRN')],'content':_0x2d7f93}],_0x18c472=new AbortController(),_0x439974=setTimeout(()=>_0x18c472[_0x24c2ec(0x2a9,'V(WL')](),0x7530),_0x202aac=await _0x7cbcfe['PWjTZ'](fetch,_0x211ee9['ai_base_url']+_0x24c2ec(0x1f1,'DhGi'),{'method':_0x7cbcfe['CTiHE'],'headers':{'Content-Type':_0x24c2ec(0x1f9,'X9Yo'),'Authorization':_0x24c2ec(0x251,'Rql#')+_0x211ee9[_0x24c2ec(0x274,'1PWt')]},'body':JSON['stringify']({'model':_0x211ee9['ai_model'],'messages':_0x3be4df,'temperature':0.3,'response_format':{'type':_0x24c2ec(0x253,'ld0p')}}),'signal':_0x18c472[_0x24c2ec(0x2d0,'^MJh')]});clearTimeout(_0x439974);if(!_0x202aac['ok'])throw new Error(_0x24c2ec(0x2c2,'c@0)')+_0x202aac['status']);const _0x43e400=await _0x202aac['json']();_0x43e400[_0x24c2ec(0x25f,'aAN8')]&&_0x43e400['choices'][0x0]&&_0x43e400[_0x24c2ec(0x2ac,'1PWt')][0x0][_0x24c2ec(0x209,'OL^O')]?(_0x7cbcfe[_0x24c2ec(0x230,'861P')](_0x2e04f9,_0x24c2ec(0x2b9,'OL^O')+_0x43e400[_0x24c2ec(0x2b7,'8JCK')][0x0]['message'][_0x24c2ec(0x1f0,'t2J[')]),_0x59651b({'status':_0x24c2ec(0x240,'ld0p'),'logs':_0x2c6525,'result':_0x43e400[_0x24c2ec(0x23d,'*C[l')][0x0]['message'][_0x24c2ec(0x1fb,'X1k8')]})):(_0x2e04f9(_0x7cbcfe['OapRm']),_0x59651b({'status':_0x24c2ec(0x290,'8[v6'),'logs':_0x2c6525,'message':_0x24c2ec(0x2d2,'D4zb')}));}catch(_0xd821c9){const _0x590436=_0xd821c9[_0x24c2ec(0x263,'^MJh')]===_0x7cbcfe[_0x24c2ec(0x2b4,'X9Yo')]?_0x24c2ec(0x267,'j!ZR'):'API请求失败:\x20'+_0xd821c9[_0x24c2ec(0x2c6,'861P')];_0x2e04f9(_0x24c2ec(0x2b1,'aFZC')+_0x590436),_0x59651b({'status':_0x24c2ec(0x236,'Fi0E'),'logs':_0x2c6525,'message':_0x590436});}}function handleDebuggerClick(_0x833340,_0xf1e7ca){const _0x178a6d=a0_0x136f8d,_0x391e5c={'TNDzB':'Input.dispatchMouseEvent','Mpiri':'mouseReleased'},{tabId:_0x18b8c1,x:_0x85af50,y:_0x4b61ed}=_0x833340,_0x43ad10={'tabId':_0x18b8c1};chrome[_0x178a6d(0x233,'^MJh')][_0x178a6d(0x2ca,'lWKe')](_0x43ad10,_0x178a6d(0x271,'OXM&'),async()=>{const _0x445c9b=_0x178a6d;if(chrome[_0x445c9b(0x20f,'OXM&')][_0x445c9b(0x2bb,'*eRy')]){console[_0x445c9b(0x2b6,'DhGi')](_0x445c9b(0x234,'zFc^'),chrome[_0x445c9b(0x223,'9dKj')][_0x445c9b(0x276,'#3L[')][_0x445c9b(0x2c0,'^MJh')]),_0xf1e7ca({'success':![],'error':chrome['runtime'][_0x445c9b(0x2c8,'DywT')][_0x445c9b(0x282,'9dKj')]});return;}try{await chrome[_0x445c9b(0x281,'X9Yo')]['sendCommand'](_0x43ad10,_0x445c9b(0x229,'DywT'),{'type':_0x445c9b(0x25c,'bjja'),'x':_0x85af50,'y':_0x4b61ed,'button':_0x445c9b(0x237,'QKoN'),'clickCount':0x1}),await chrome[_0x445c9b(0x2cf,'OXM&')][_0x445c9b(0x203,'^MJh')](_0x43ad10,_0x391e5c[_0x445c9b(0x1ef,'X1k8')],{'type':_0x391e5c['Mpiri'],'x':_0x85af50,'y':_0x4b61ed,'button':'left','clickCount':0x1}),_0xf1e7ca({'success':!![]});}catch(_0xb55589){console['error'](_0x445c9b(0x293,'^MJh'),_0xb55589),_0xf1e7ca({'success':![],'error':_0xb55589[_0x445c9b(0x211,'5N83')]});}finally{chrome[_0x445c9b(0x21b,'OL^O')]['detach'](_0x43ad10);}});}async function handleDebuggerType(_0x406fd3,_0x4bc37a){const _0x362917=a0_0x136f8d,{tabId:_0xd8c221,text:_0x58bc19}=_0x406fd3,_0x3d74d1={'tabId':_0xd8c221};try{await new Promise((_0x537bea,_0x1e3850)=>{const _0x372232=a0_0x113e;chrome[_0x372232(0x24c,'g@bg')][_0x372232(0x2ab,'*C[l')](_0x3d74d1,_0x372232(0x26b,'aFZC'),()=>{const _0x2a0105=_0x372232;if(chrome[_0x2a0105(0x226,'YJ3A')][_0x2a0105(0x231,'TlSW')])return _0x1e3850(new Error(chrome[_0x2a0105(0x23c,'861P')][_0x2a0105(0x23e,'*C[l')][_0x2a0105(0x2c6,'861P')]));_0x537bea();});});for(const _0x5637cf of _0x58bc19){await chrome['debugger'][_0x362917(0x2c7,'YJ3A')](_0x3d74d1,_0x362917(0x275,'2^xY'),{'type':_0x362917(0x20c,'E[Sp'),'text':_0x5637cf}),await new Promise(_0x4d4ed3=>setTimeout(_0x4d4ed3,0x32+Math[_0x362917(0x26f,'%ymM')]()*0x50));}_0x4bc37a({'success':!![]});}catch(_0x4c0d6a){console[_0x362917(0x279,'g@bg')]('Debugger\x20type\x20command\x20failed:\x20',_0x4c0d6a),_0x4bc37a({'success':![],'error':_0x4c0d6a[_0x362917(0x285,'g@bg')]});}finally{chrome[_0x362917(0x22a,'8JCK')]['detach'](_0x3d74d1)[_0x362917(0x2bd,'E[Sp')](_0x2ee356=>console[_0x362917(0x225,'Jo5D')](_0x362917(0x2ce,'mdRN'),_0x2ee356));}}async function getDeviceId(){const _0x2442ba=a0_0x136f8d,_0xcbb7bb=await chrome[_0x2442ba(0x21f,'V(WL')][_0x2442ba(0x221,'OXM&')][_0x2442ba(0x264,')Z5!')]([_0x2442ba(0x242,'8JCK')]);if(_0xcbb7bb['deviceId'])return _0xcbb7bb[_0x2442ba(0x25d,')Z5!')];const _0x54aa44=_0x2442ba(0x269,'Rql#')+self['crypto'][_0x2442ba(0x2d4,'aAN8')]();return await chrome[_0x2442ba(0x202,'X1k8')][_0x2442ba(0x215,'*C[l')][_0x2442ba(0x28f,'YSLB')]({'deviceId':_0x54aa44}),_0x54aa44;}async function handleVerifyLicense(_0x23b1e8,_0x1405f0){const _0x5af04b=a0_0x136f8d,_0x517ffa={'xdcSd':function(_0x2a547e,_0x51a00f,_0x1e10cd){return _0x2a547e(_0x51a00f,_0x1e10cd);},'jElnj':_0x5af04b(0x256,'t2J['),'QcwaE':function(_0x1d7bec,_0x2e9c27){return _0x1d7bec(_0x2e9c27);},'usCRF':'授权验证过程中出错:'},{key:_0x1d0f77}=_0x23b1e8;try{const {auth_server_url:_0x46d61d}=await new Promise(_0x5ef6d3=>{const _0x397e9e=_0x5af04b;chrome[_0x397e9e(0x202,'X1k8')][_0x397e9e(0x23a,'V(WL')][_0x397e9e(0x27e,'jjnC')](_0x397e9e(0x1fc,'%97@'),_0x5ef6d3);});if(!_0x46d61d)throw new Error('未找到授权服务器地址配置。');const _0x154bd5=await getDeviceId(),_0x1cb762=await _0x517ffa['xdcSd'](fetch,_0x46d61d,{'method':_0x5af04b(0x224,'IA@t'),'headers':{'Content-Type':_0x517ffa[_0x5af04b(0x218,'X9Yo')]},'body':JSON[_0x5af04b(0x22c,'E[Sp')]({'key':_0x1d0f77,'device_id':_0x154bd5})});if(!_0x1cb762['ok'])throw new Error(_0x5af04b(0x2a2,'2^xY')+_0x1cb762[_0x5af04b(0x262,'c@0)')]+'\x20'+_0x1cb762['statusText']);const _0x414bce=await _0x1cb762[_0x5af04b(0x201,'YJ3A')]();_0x517ffa[_0x5af04b(0x2a5,'j!ZR')](_0x1405f0,_0x414bce);}catch(_0x4e8543){console[_0x5af04b(0x27f,'jjnC')](_0x517ffa[_0x5af04b(0x2d6,'1PWt')],_0x4e8543),_0x1405f0({'valid':![],'message':_0x5af04b(0x2a8,'bjja')+_0x4e8543[_0x5af04b(0x2c0,'^MJh')]});}}async function handleStartAutomation(){const _0x18421c=a0_0x136f8d,_0x3927fb={'QFQLr':'auth_server_url','UsIAy':function(_0x3d7e49){return _0x3d7e49();},'upaBN':_0x18421c(0x21a,'DywT'),'IYaQH':_0x18421c(0x24b,'j!ZR')};try{const _0x40fa49=await new Promise(_0x4bf8ab=>{const _0x251510=_0x18421c;chrome[_0x251510(0x24e,'5N83')][_0x251510(0x260,'%97@')][_0x251510(0x292,'%97@')]([_0x251510(0x24f,'zFc^'),_0x3927fb[_0x251510(0x297,'DywT')]],_0x4bf8ab);});if(!_0x40fa49[_0x18421c(0x210,'TlSW')]){console[_0x18421c(0x20d,'DywT')](_0x18421c(0x2c1,'wDun'));return;}if(!_0x40fa49[_0x18421c(0x22f,'g@bg')]){console[_0x18421c(0x2b3,'($6D')](_0x18421c(0x24a,'($6D'));return;}const _0x3a2dc7=await _0x3927fb[_0x18421c(0x2b0,'OXM&')](getDeviceId),_0x2a827e=await fetch(_0x40fa49[_0x18421c(0x245,'mdRN')],{'method':'POST','headers':{'Content-Type':_0x3927fb['upaBN']},'body':JSON[_0x18421c(0x20a,'QKoN')]({'key':_0x40fa49['license_key'],'device_id':_0x3a2dc7})}),_0x2ddc3b=await _0x2a827e['json']();if(_0x2ddc3b[_0x18421c(0x2d5,'aFZC')]){await new Promise(_0x349844=>chrome['storage']['local']['set']({'license_valid':!![]},_0x349844)),console[_0x18421c(0x20d,'DywT')]('授权验证成功，正在准备自动化环境...');const _0x34a582='https://www.xiaohongshu.com/explore';let _0x286cd0=null;const _0x53aef2=await chrome[_0x18421c(0x24d,'V(WL')][_0x18421c(0x213,'nTta')]({'url':_0x18421c(0x2d1,'Jo5D')});_0x53aef2[_0x18421c(0x214,'%ymM')]>0x0?(_0x286cd0=_0x53aef2[0x0],await chrome[_0x18421c(0x243,'2^xY')][_0x18421c(0x295,'ld0p')](_0x286cd0['id'],{'active':!![]}),console[_0x18421c(0x27a,'ld0p')]('已找到并激活现有的小红书发现页\x20(Tab\x20ID:\x20'+_0x286cd0['id']+')。')):(_0x286cd0=await chrome[_0x18421c(0x289,'1PWt')][_0x18421c(0x26e,'X9Yo')]({'url':_0x34a582,'active':!![]}),console[_0x18421c(0x21e,'wDun')](_0x18421c(0x27b,'jjnC')+_0x286cd0['id']+')。'));const _0x45f22b=async _0x1d29a1=>{return new Promise(async _0x389473=>{const _0x315bbe={'RbLZr':function(_0x53ef8a,_0x53db24){return _0x53ef8a(_0x53db24);}},_0x464e6a=async()=>{const _0x491003=a0_0x113e;try{const _0x250282=await chrome[_0x491003(0x26a,'g@bg')][_0x491003(0x200,'2^xY')](_0x1d29a1);_0x250282['status']===_0x491003(0x261,'JfAK')?_0x389473(!![]):setTimeout(_0x464e6a,0x1f4);}catch(_0x67c4fb){console[_0x491003(0x265,'5N83')](_0x491003(0x2d8,'NVuy'),_0x67c4fb),_0x315bbe[_0x491003(0x26d,'ld0p')](_0x389473,![]);}};await _0x464e6a();});};console[_0x18421c(0x294,'QKoN')](_0x18421c(0x2bf,'nTta')+_0x286cd0['id']+')\x20加载完成...');const _0xc93ff6=await _0x45f22b(_0x286cd0['id']);_0xc93ff6?(console['log'](_0x3927fb[_0x18421c(0x27d,'%97@')]),await new Promise(_0x3a28d3=>{const _0x1d99a4=_0x18421c;chrome[_0x1d99a4(0x219,'c@0)')][_0x1d99a4(0x2a3,'8JCK')]['set']({'xhs_agent_running':!![],'xhs_agent_startTime':Date[_0x1d99a4(0x250,'Fi0E')]()},_0x3a28d3);}),console[_0x18421c(0x291,'j!ZR')](_0x18421c(0x2a4,'2^xY'))):console[_0x18421c(0x283,'Rql#')](_0x18421c(0x220,'%ymM'));}else await new Promise(_0x59b80a=>chrome[_0x18421c(0x270,'DhGi')][_0x18421c(0x2c4,'2^xY')][_0x18421c(0x2a0,'wDun')]({'license_valid':![]},_0x59b80a)),console[_0x18421c(0x2b5,'861P')](_0x18421c(0x29a,'zFc^')+_0x2ddc3b[_0x18421c(0x20e,'aFZC')]);}catch(_0x553659){console[_0x18421c(0x2cc,'^MJh')]('启动流程出错:\x20'+_0x553659[_0x18421c(0x2cb,'($6D')]);}}chrome[a0_0x136f8d(0x20f,'OXM&')][a0_0x136f8d(0x2a7,'nTta')][a0_0x136f8d(0x2cd,'wDun')]((_0x222507,_0x45fea5,_0x2ed4d2)=>{const _0x50def7=a0_0x136f8d,_0x2ddda3={'RUpKe':_0x50def7(0x244,'8[v6'),'fSfDa':_0x50def7(0x241,'jjnC'),'eowba':function(_0x7a9eb3,_0x4fa9b4,_0x3b8b9a){return _0x7a9eb3(_0x4fa9b4,_0x3b8b9a);},'amNlI':_0x50def7(0x252,'wc2g')};switch(_0x222507[_0x50def7(0x205,'lWKe')]){case _0x2ddda3['RUpKe']:_0x2ed4d2({'tabId':_0x45fea5['tab']['id']});return![];case _0x2ddda3['fSfDa']:_0x2ddda3[_0x50def7(0x1f4,'bjja')](handleDebuggerClick,_0x222507,_0x2ed4d2);return!![];case _0x50def7(0x299,'*eRy'):handleDebuggerType(_0x222507,_0x2ed4d2);return!![];case _0x50def7(0x1ed,'%ymM'):handleVerifyLicense(_0x222507,_0x2ed4d2);return!![];case _0x50def7(0x258,'DywT'):handleStartAutomation();return![];case _0x2ddda3[_0x50def7(0x2b8,'zFc^')]:handleAiChat(_0x222507,_0x2ed4d2);return!![];default:return![];}});